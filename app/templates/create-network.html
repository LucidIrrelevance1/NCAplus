{% extends "base.html" %}


{% block head %}
{{ super() }}
<title>Create Network</title>
{% endblock head %}
{% block content %}
    {% set labelclass = "col-lg-2 col-md-2 col-sm-2 col-xs-6 control-label" %}
    {% set labelclasslg = "col-lg-4 col-md-4 col-sm-4 col-xs-12 control-label" %}
    {% set selectclass = "col-lg-3 col-md-3 col-sm-2 col-xs-6" %}
    {% set txtinputclassmd = "col-lg-6 col-md-6 col-sm-12 col-xs-12" %}
    {% set txtinputclasssm = "col-lg-3 col-md-3 col-sm-6 col-xs-12" %}
    {% set ipinputclass = "col-lg-3 col-md-3 col-sm-3 col-xs-12" %}
    {% set ipinputclasssm = "col-lg-2 col-md-2 col-sm-3 col-xs-6" %}
    {% set apiclabels = "col-lg-1 col-md-1 col-sm-1 col-xs-6 control-label" %}
    {% set apicinputs = "col-lg-2 col-md-2 col-sm-2 col-xs-6" %}
<form action="javascript:void(null);"
              onsubmit="submit_network_form()"
              id="network_form"
              class="form-horizontal">
    <input type="hidden" id="operation" name="operation" value="">
    <input type="hidden" id="sub_operation" name="sub_operation" value="">
    <div id="div_create_group" name="div_create_group" class="panel panel-primary">
        <div  class="panel-heading">Management Group
            <div id="create_group_response" style="float:right;font-size:16px"></div>
        </div>
        <div class="panel-body">
                 <div class="form-group">
                        <label class="{{ labelclass }}" > Group name
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                        data-toggle="popover"
                                        data-trigger="hover"
                                        title="Network name"
                                        data-content="Specify the name of the new group">
                            </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_group_name" value=""
                                   name="create_group_name" placeholder="Name">
                        </div>
                    </div>
                <hr>
            <button id="btn_create_group" type="button"  class="btn btn-primary" onclick="create_group()">Create</button>
        </div>
    </div>
    <div id="div_create_network" name="div_create_network" class="panel panel-primary">
        <div  class="panel-heading">Network information
            <div id="create_network_response" style="float:right;font-size:16px"></div>
        </div>
        <div class="panel-body">
                 <div class="form-group">
                        <label class="{{ labelclass }}" > Network name
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                        data-toggle="popover"
                                        data-trigger="hover"
                                        title="Network name"
                                        data-content="Specify the name of the new network">
                            </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_network_name" value=""
                                   name="create_network_name" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}" > Encapsulation
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                        data-toggle="popover"
                                        data-trigger="hover"
                                        title="Encapsulation"
                                        data-content="Specify the VLAN encapsulation of the new network">
                            </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_network_encapsulation"
                                   value="" name="create_network_encapsulation" placeholder="VLAN">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}" > Group
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                        data-toggle="popover"
                                        data-trigger="hover"
                                        title="Group"
                                        data-content="Select the group to assign the network">
                            </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_create_network_group"  name="sel_create_network_group"
                                    class="form-control sel-tenant">
                            </select>
                        </div>
                    </div>
                <hr>
            <button id="btn_create_network" type="button"  class="btn btn-primary" onclick="create_network()">Create</button>
            </div>
        </div>
    </form>


{% endblock content %}

{% block scripts %}
{{ super() }}
<script type="text/javascript">

	$().ready(function() {
	    get_groups();

		// validations
		$("#network_form").validate({
		    errorClass: "error",
            errorElement: "label",
            rules: {
				network_number: {
					required: true
				}
			},
			highlight: function(element, errorClass) {
                $(element).removeClass(errorClass);
            }
		});
	});

function submit_network_form() {

    if($('#network_form').valid()){
        Sijax.request('network_form_handler', [Sijax.getFormValues('#network_form')]);
    }
}

function create_network(){
    $('#create_network_name').rules("add", "required");
    $('#create_network_encapsulation').rules("add", "required");
    $('#sel_create_network_group').rules("add", "required");
    if($('#network_form').valid()){
        $('#operation').val('create_network')
        $('#network_form').submit();
        $('#create_network_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#create_network_name').rules("remove", "required");
    $('#create_network_encapsulation').rules("remove", "required");
    $('#sel_create_network_group').rules("remove", "required");
}

function create_group(){
    $('#create_group_name').rules("add", "required");
    if($('#network_form').valid()){
        $('#operation').val('create_group')
        $('#network_form').submit();
        $('#create_group_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#create_group_name').rules("remove", "required");
}

function get_groups(){
    $('#operation').val('get_groups')
    $('#network_form').submit();
    $('#create_network_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
}

</script>
{% endblock scripts %}
