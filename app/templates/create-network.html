{% extends "base.html" %}


{% block head %}
{{ super() }}
<title>Create Network</title>
{% endblock head %}
{% block content %}
{% set labelclass = "col-lg-2 col-md-2 col-sm-2 col-xs-6 control-label" %}
{% set labelclasslg = "col-lg-4 col-md-4 col-sm-4 col-xs-12 control-label" %}
{% set selectclass = "col-lg-3 col-md-3 col-sm-2 col-xs-6" %}
{% set txtinputclassmd = "col-lg-6 col-md-6 col-sm-12 col-xs-12" %}
{% set txtinputclasssm = "col-lg-3 col-md-3 col-sm-6 col-xs-12" %}
{% set ipinputclass = "col-lg-3 col-md-3 col-sm-3 col-xs-12" %}
{% set ipinputclasssm = "col-lg-2 col-md-2 col-sm-3 col-xs-6" %}
{% set apiclabels = "col-lg-1 col-md-1 col-sm-1 col-xs-6 control-label" %}
{% set apicinputs = "col-lg-2 col-md-2 col-sm-2 col-xs-6" %}
<form action="javascript:void(null);"
      onsubmit="submit_network_form()"
      id="network_form"
      class="form-horizontal">
    <input type="hidden" id="operation" name="operation" value="">
    <input type="hidden" id="sub_operation" name="sub_operation" value="">
    <ul style="margin: 20px 0px 22px; visibility: visible;" class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#group_tab">Group</a></li>
        <li class=""><a data-toggle="tab" href="#network_tab">Network</a></li>
        <li class=""><a data-toggle="tab" href="#vpc_tab">VPC</a></li>
        <li class=""><a data-toggle="tab" href="#vpc_access_tab">VPC Access</a></li>
        <li class=""><a data-toggle="tab" href="#port_access_tab">Single Access</a></li>
        <li class=""><a data-toggle="tab" href="#access_switch_tab">Access Switches</a></li>
    </ul>
    <div class="tab-content">
        <div id="group_tab" class="tab-pane fade in active">
            <div id="div_create_group" name="div_create_group" class="panel panel-primary">
                <div class="panel-heading">Create Management Group
                    <div id="create_group_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Group name
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Group name"
                                  data-content="Specify the name of the new group">
                            </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_group_name" value=""
                                   name="create_group_name" placeholder="Name">
                        </div>
                    </div>
                    <hr>
                    <button id="btn_create_group" type="button" class="btn btn-primary" onclick="create_group()">
                        Create
                    </button>
                </div>
            </div>
            <div id="div_delete_group" name="div_delete_group" class="panel panel-danger">
                <div class="panel-heading">Delete Management Group
                    <div id="delete_group_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Group
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Group"
                                          data-content="Select the group to be deleted">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_delete_group_name" name="sel_delete_group_name"
                                    class="form-control sel-group">
                            </select>
                        </div>
                    </div>
                    <hr>
                    <button id="btn_delete_group" type="button" class="btn btn-danger" onclick="delete_group()">
                        Delete
                    </button>
                </div>
            </div>
        </div>
        <div id="network_tab" class="tab-pane fade">
            <div id="div_create_network" name="div_create_network" class="panel panel-primary">
                <div class="panel-heading">Create Network
                    <div id="create_network_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Network name
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Network"
                                          data-content="Specify the name of the new network">
                                    </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_network_name" value=""
                                   name="create_network_name" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> VLAN
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="VLAN"
                                          data-content="Specify the VLAN of the new network">
                                    </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_network_encapsulation"
                                   value="" name="create_network_encapsulation" placeholder="VLAN">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Group
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Group"
                                          data-content="Select the group to assign the network">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_create_network_group" name="sel_create_network_group"
                                    class="form-control sel-group">
                            </select>
                        </div>
                    </div>
                    <hr>
                    <button id="btn_create_network" type="button" class="btn btn-primary" onclick="create_network()">
                        Create
                    </button>
                </div>
            </div>
            <div id="div_delete_network" name="div_delete_network" class="panel panel-danger">
                <div class="panel-heading">Delete Network
                    <div id="delete_network_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Group
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Group"
                                          data-content="Select the group to search the network">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_delete_network_group" name="sel_delete_network_group"
                                    class="form-control sel-group" onchange="get_sel_delete_networks();">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Network
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Network"
                                          data-content="Select the network to be deleted">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_delete_network_name" name="sel_delete_network_name"
                                    class="form-control">
                            </select>
                        </div>

                    </div>
                    <hr>
                    <button id="btn_delete_network" type="button" class="btn btn-danger" onclick="delete_network()">
                        Delete
                    </button>
                </div>
            </div>
            <div id="div_create_network_profile" name="div_create_network" class="panel panel-primary">
                <div class="panel-heading">Create VLAN Profile
                    <div id="create_network_profile_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> VLAN Profile
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Name"
                                          data-content="Ingress the vlan profile name">
                                    </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_network_profile_name"
                                   value=""
                                   name="create_network_profile_name" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Group
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Group"
                                          data-content="Select the group to search the network">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_create_network_profile_group" name="sel_create_network_profile_group"
                                    class="form-control sel-group" onchange="get_create_network_profile_networks();">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Network
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Group"
                                          data-content="Select the network to be added">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_create_network_profile_network" name="sel_create_network_profile_network"
                                    class="form-control">
                            </select>
                        </div>

                    </div>
                    <hr>
                    <button id="btn_add_create_network_profile" type="button" class="btn btn-primary"
                            onclick="add_create_network_profile()">Add
                    </button>
                    <div class="form-group">
                        <table id="table_create_network_profile" class="table table-striped">
                            <thead>
                            <tr>
                                <th>Group</th>
                                <th>Network</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr></tr>
                            </tbody>
                        </table>
                    </div>
                    <hr>
                    <button id="btn_create_network_profile" type="button" class="btn btn-primary"
                            onclick="create_network_profile()">
                        Create
                    </button>
                    <input type="hidden" name="create_network_profile_dns" id="create_network_profile_dns" value=""/>
                </div>
            </div>
            <div id="div_delete_network_profile" name="div_delete_network" class="panel panel-danger">
                <div class="panel-heading">Delete VLAN Profile
                    <div id="delete_network_profile_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> VLAN Profile
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="VLAN"
                                          data-content="Select the vlan profile to delete">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_delete_network_profile" name="sel_delete_network_profile"
                                    class="form-control sel-net-profile"
                                    onchange="get_delete_network_profile_networks();">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <table id="table_delete_network_profile" class="table table-striped">
                            <thead>
                            <tr>
                                <th>Group</th>
                                <th>Network</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr></tr>
                            </tbody>
                        </table>
                    </div>
                    <hr>
                    <button id="btn_delete_network_profile" type="button" class="btn btn-danger"
                            onclick="delete_network_profile()">
                        Delete
                    </button>
                    <input type="hidden" name="delete_network_profile_dns" id="delete_network_profile_dns" value=""/>
                </div>
            </div>
        </div>
        <div id="vpc_tab" class="tab-pane fade">
            <div id="div_create_vpc" name="div_create_vpc" class="panel panel-primary">
                <div class="panel-heading">Create Virtual Port Channel
                    <div id="create_vpc_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> VPC name
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="VPC name"
                                          data-content="Specify the name of the new virtual port channel">
                                    </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="create_vpc_name" value=""
                                   name="create_vpc_name" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Leaf switch
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Leaf"
                                          data-content="Select the leaf switch to be assigned to the vpc">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_leaf_create_vpc" name="sel_leaf_create_vpc"
                                    class="form-control sel-leaf" onchange="get_ports()">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Port
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Port"
                                          data-content="Select the switch port to be assigned to the vpc.">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_port_create_vpc" name="sel_port_create_vpc" class="form-control">
                            </select>
                        </div>
                    </div>
                    <hr>
                    <button id="btn_add_port_vpc" type="button" class="btn btn-primary" onclick="add_port()">Add
                    </button>
                    <div class="form-group">
                        <table id="vpc_ports" class="table table-striped">
                            <thead>
                            <tr>
                                <th>Switch</th>
                                <th>Port</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr></tr>
                            </tbody>
                        </table>
                    </div>
                    <hr>
                    <button id="btn_create_vpc" type="button" class="btn btn-primary" onclick="create_vpc()">Create
                    </button>
                    <input type="hidden" value="" id="port_dns" name="port_dns">
                </div>
            </div>
            <div id="div_delete_vpc" name="div_delete_vpc" class="panel panel-danger">
                <div class="panel-heading">Delete Virtual Port Channel
                    <div id="delete_vpc_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> VPC
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="VPC name"
                                          data-content="Select virtual port channel that will be deleted">
                                    </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_delete_vpc_name" name="sel_delete_vpc_name"
                                    class="form-control sel-vpc" onchange="get_delete_vpc_assigned_ports()">
                            </select>
                        </div>
                    </div>
                    <hr>
                    <div class="form-group">
                        <table id="delete_vpc_ports" class="table table-striped">

                        </table>
                    </div>
                    <hr>
                    <button id="btn_delete_vpc" type="button" class="btn btn-danger" onclick="delete_vpc()">Delete
                    </button>
                </div>
            </div>
        </div>
        <div id="vpc_access_tab" class="tab-pane fade">
            <div id="div_create_vpc_access" class="panel panel-primary">
                <div class="panel-heading">Create Virtual Port Channel Access
                    <div id="div_create_vpc_access_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a data-toggle="tab" href="#"
                               onclick="$('#vlan_profile').css('display','none');
                            $('#single_vlan').css('display','');
                            $('#create_vpc_access_type').val('single_vlan')">
                                Single VLAN</a>
                        </li>
                        <li class=""><a data-toggle="tab" href="#"
                                        onclick="$('#single_vlan').css('display','none');
                            $('#vlan_profile').css('display','');
                            $('#create_vpc_access_type').val('vlan_profile')">
                            VLAN Profile</a></li>
                    </ul>
                    <br/>

                    <div id="single_vlan">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Group
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the group to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_group_create_vpc_access" name="sel_group_create_vpc_access"
                                        class="form-control sel-group" onchange="get_create_vpc_access_networks()">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Network
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the network to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_network_create_vpc_access" name="sel_network_create_vpc_access"
                                        class="form-control network">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id="vlan_profile" style="display:none">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> VLAN Profile
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="VLAN Profile"
                                  data-content="Select the vlan profile to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_profile_create_vpc_access" name="sel_profile_create_vpc_access"
                                        class="form-control sel-net-profile">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> VPC
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="VPC"
                                  data-content="Select the virtual port channel to be assigned to the network">
                            </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_vpc_create_vpc_access" name="sel_vpc_create_vpc_access"
                                    class="form-control sel-vpc">
                            </select>
                        </div>
                    </div>
                    <hr>
                    <button id="btn_create_vpc_access" type="button" class="btn btn-primary"
                            onclick="create_vpc_access()">Assign
                    </button>
                    <input type="hidden" name="create_vpc_access_type" id="create_vpc_access_type" value="single_vlan"/>
                </div>

            </div>
            <div id="div_delete_vpc_access" name="div_delete_vpc_access" class="panel panel-danger">
                <div class="panel-heading">Delete Virtual Port Channel Access
                    <div id="div_delete_vpc_access_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a data-toggle="tab" href="#"
                               onclick="$('#vlan_profile_delete_vpc_access').css('display','none');
                            $('#single_vlan_delete_vpc_access').css('display','');
                            $('#delete_vpc_access_type').val('single_vlan')">
                                Single VLAN</a>
                        </li>
                        <li class=""><a data-toggle="tab" href="#"
                                        onclick="$('#single_vlan_delete_vpc_access').css('display','none');
                            $('#vlan_profile_delete_vpc_access').css('display','');
                            $('#delete_vpc_access_type').val('vlan_profile')">
                            VLAN Profile</a></li>
                    </ul>
                    <br/>
                    <div id="single_vlan_delete_vpc_access">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Group
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Group"
                                  data-content="Select the group to be removed from the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_group_delete_vpc_access" name="sel_group_delete_vpc_access"
                                        class="form-control sel-group" onchange="get_delete_vpc_access_networks()">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Network
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the network to be removed from the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_network_delete_vpc_access" name="sel_network_delete_vpc_access"
                                        class="form-control" onchange="get_delete_vpc_access_assignments()">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="{{ labelclass }}"> VPC
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="VPC"
                                  data-content="Select the virtual port channel to be removed from the network
                                  or profile">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_vpc_delete_vpc_access" name="sel_vpc_delete_vpc_access"
                                        class="form-control">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id="vlan_profile_delete_vpc_access" style="display:none">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> VLAN Profile
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="VLAN Profile"
                                  data-content="Select the vlan profile to be removed from the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_profile_delete_vpc_access" name="sel_profile_delete_vpc_access"
                                        class="form-control sel-net-profile">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="{{ labelclass }}"> VPC
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="VPC"
                                  data-content="Select the virtual port channel to be removed from the network
                                  profile">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_vpc_delete_vpc_access_profile" name="sel_vpc_delete_vpc_access_profile"
                                        class="form-control sel-vpc">
                                </select>
                            </div>
                        </div>
                    </div>

                    <hr>
                    <button id="btn_delete_network_vpc_assignments" type="button" class="btn btn-danger"
                            onclick="delete_network_vpc_assignments()">Remove assignment
                    </button>
                    <input type="hidden" name="delete_vpc_access_type" id="delete_vpc_access_type" value="single_vlan"/>
                </div>
            </div>
        </div>
        <div id="port_access_tab" class="tab-pane fade">
            <div class="panel panel-primary">
                <div class="panel-heading"> Create Single Port Access
                    <div id="create_single_access_response" style="float:right;font-size:16px"></div>
                </div>

                <div class="panel-body">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a data-toggle="tab" href="#"
                               onclick="$('#vlan_profile_port').css('display','none');
                            $('#single_vlan_port').css('display','');
                            $('#create_port_access_type').val('single_vlan')">
                                Single VLAN</a>
                        </li>
                        <li class=""><a data-toggle="tab" href="#"
                                        onclick="$('#single_vlan_port').css('display','none');
                            $('#vlan_profile_port').css('display','');
                            $('#create_port_access_type').val('vlan_profile')">
                            VLAN Profile</a></li>
                    </ul>
                    <br/>
                    <div id="single_vlan_port">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Group
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the group to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_create_single_access_group" name="sel_create_single_access_group"
                                        class="form-control sel-group" onchange="get_create_single_access_networks()">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Network
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the network to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_create_single_access_network" name="sel_create_single_access_network"
                                        class="form-control network">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id="vlan_profile_port" style="display:none">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> VLAN Profile
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the vlan profile to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_profile_create_port_access" name="sel_profile_create_port_access"
                                        class="form-control sel-net-profile">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Leaf switch
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Leaf"
                                  data-content="Select the leaf switch to be assigned to the network">
                            </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_create_single_access_leaf" name="sel_create_single_access_leaf"
                                    class="form-control sel-leaf" onchange="get_create_single_access_ports()">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Port
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Leaf"
                                  data-content="Select the switch port to be assigned to the network">
                            </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_create_single_access_port" name="sel_create_single_access_port"
                                    class="form-control">
                            </select>
                        </div>
                    </div>
                    <hr>
                    <button id="btn_delete_single_access" type="button" class="btn btn-primary"
                            onclick="create_single_access()">Create
                    </button>
                    <input type="hidden" name="create_port_access_type" id="create_port_access_type"
                           value="single_vlan"/>
                </div>

            </div>
            <div class="panel panel-danger">
                <div class="panel-heading">Delete Single Port Access
                    <div id="delete_single_access_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a data-toggle="tab" href="#"
                               onclick="$('#delete_vlan_profile_port').css('display','none');
                            $('#delete_single_vlan_port').css('display','');
                            $('#delete_port_access_type').val('single_vlan')">
                                Single VLAN</a>
                        </li>
                        <li class=""><a data-toggle="tab" href="#"
                                        onclick="$('#delete_single_vlan_port').css('display','none');
                            $('#delete_vlan_profile_port').css('display','');
                            $('#delete_port_access_type').val('vlan_profile')">
                            VLAN Profile</a></li>
                    </ul>
                    <br/>
                    <div id="delete_single_vlan_port">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Group
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the group to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_delete_single_access_group" name="sel_delete_single_access_group"
                                        class="form-control sel-group"
                                        onchange="get_delete_single_access_networks()">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="{{ labelclass }}"> Network
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Network"
                                  data-content="Select the network to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_delete_single_access_network"
                                        name="sel_delete_single_access_network"
                                        class="form-control network">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id="delete_vlan_profile_port" style="display:none">
                        <div class="form-group">
                            <label class="{{ labelclass }}"> VLAN Profile
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="VLAN Profile"
                                  data-content="Select the VLAN profile to be assign to the virtual port channel">
                            </span>
                            </label>
                            <div class="{{ selectclass }}">
                                <select id="sel_profile_delete_port_access" name="sel_profile_delete_port_access"
                                        class="form-control sel-net-profile">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Leaf switch
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Leaf"
                                  data-content="Select the leaf switch to be assigned to the network">
                            </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_delete_single_access_leaf" name="sel_delete_single_access_leaf"
                                    class="form-control sel-leaf" onchange="get_delete_single_access_ports()">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Port
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                  data-toggle="popover"
                                  data-trigger="hover"
                                  title="Port"
                                  data-content="Select the switch port to be assigned to the network">
                            </span>
                        </label>
                        <div class="{{ selectclass }}">
                            <select id="sel_delete_single_access_port" name="sel_delete_single_access_port"
                                    class="form-control">
                            </select>
                        </div>
                    </div>
                    <hr>
                    <button id="btn_create_single_access" type="button" class="btn btn-danger"
                            onclick="delete_single_access()">Remove Assignment
                    </button>
                    <input type="hidden" name="delete_port_access_type" id="delete_port_access_type"
                           value="single_vlan"/>
                </div>
            </div>
        </div>
        <div id="access_switch_tab" class="tab-pane fade">
            <div id="div_access_switch" name="div_access_switch" class="panel panel-primary">
                <div class="panel-heading">Delete Management Group
                    <div id="access_switch_response" style="float:right;font-size:16px"></div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="{{ labelclass }}"> IP
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="IP"
                                          data-content="Ingress the switch management IP">
                                    </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="ip_access_switch" value=""
                                   name="ip_access_switch" placeholder="x.x.x.x">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> Interface
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="Interface"
                                          data-content="Ingress the interface to be configured">
                                    </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="interface_access_switch"
                                   value=""
                                   name="interface_access_switch" placeholder="Ethernet x/x">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="{{ labelclass }}"> VLAN
                                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"
                                          data-toggle="popover"
                                          data-trigger="hover"
                                          title="VLAN"
                                          data-content="Specify the network to be configured inside the switch">
                                    </span>
                        </label>
                        <div class="{{ txtinputclassmd }}">
                            <input type="text" class="form-control" maxlength="50" id="vlan_access_switch" value=""
                                   name="vlan_access_switch" placeholder="Vlan number">
                        </div>
                    </div>
                    <hr>
                    <button id="btn_access_switch" type="button" class="btn btn-primary" onclick="access_switch()">
                        Configure
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>


{% endblock content %}

{% block scripts %}
{{ super() }}
<script type="text/javascript">

	$().ready(function() {
	    get_groups();

		// validations
		$("#network_form").validate({
		    errorClass: "error",
            errorElement: "label",
            rules: {

			},
			highlight: function(element, errorClass) {
                $(element).removeClass(errorClass);
            }
		});
		get_leafs();
		get_vpcs();
		get_network_profiles();
	});

function submit_network_form() {

    if($('#network_form').valid()){
        Sijax.request('network_form_handler', [Sijax.getFormValues('#network_form')]);
    }
}

function create_network(){
    $('#create_network_name').rules("add", "required");
    $('#create_network_encapsulation').rules("add", "required");
    $('#sel_create_network_group').rules("add", "required");
    if($('#network_form').valid()){
        $('#operation').val('create_network')
        $('#network_form').submit();
        $('#create_network_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#create_network_name').rules("remove", "required");
    $('#create_network_encapsulation').rules("remove", "required");
    $('#sel_create_network_group').rules("remove", "required");
}

function create_group(){
    $('#create_group_name').rules("add", "required");
    if($('#network_form').valid()){
        $('#operation').val('create_group')
        $('#network_form').submit();
        $('#create_group_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#create_group_name').rules("remove", "required");
}

function get_groups(){
    $('#operation').val('get_groups')
    $('#network_form').submit();
    $('#create_network_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
}


function get_leafs(){
    if($('#network_form').valid()){
            $('#operation').val('get_leafs')
            $('#network_form').submit();
            $('#create_vpc_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
}

function get_ports(){
    $('#sel_leaf_create_vpc').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_ports')
            $('#network_form').submit();
            $('#create_vpc_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_leaf_create_vpc').rules("remove", "required");
}

function add_port(){
    $('#create_vpc_response').html('')
    $('#sel_port_create_vpc').rules("add", "required");
    $('#sel_leaf_create_vpc').rules("add", "required");
    if($('#network_form').valid()){
        is_added = false;
        $("#vpc_ports tr").each(function(index) {
            if (index != 0) {

                $row = $(this);

                var id = $row.find("td:first").text();

                if (id.indexOf($('#sel_port_create_vpc').val()) == 0) {
                       $('#create_vpc_response').html(
                       '<label class="label label-danger" > <i class="fa fa-times-circle"></i> Port already added</label>'
                       );
                       is_added = true;
                }
            }
        });
        if (!is_added){
            tr_id = ($('#sel_leaf_create_vpc option:selected').text() + $('#sel_port_create_vpc option:selected').text()).
            replace('-','').replace('/','');
            $('#vpc_ports > tbody > tr').eq(0).after(
                '<tr id=' +
                tr_id +
                '><td style="display:none">' +
                $('#sel_port_create_vpc').val() +
                '</td><td>' + $('#sel_leaf_create_vpc option:selected').text() +
                '</td><td>' + $('#sel_port_create_vpc option:selected').text() +
                '</td><td><i class="fa fa-times-circle" onclick="$(\'#' +
                tr_id +
                '\').remove();"></i>' +
                '</td></tr>'
            );
        }
    }
    $('#sel_port_create_vpc').rules("remove", "required");
    $('#sel_leaf_create_vpc').rules("remove", "required");
}

function create_vpc(){
    if($("#vpc_ports tr").length - 2 <= 0){
        $('#create_vpc_response').html(
                   '<label class="label label-danger" > <i class="fa fa-times-circle"></i> Must assign at least two ports</label>'
                   );
        return;
    }
    port_dns = ''
    $("#vpc_ports tr").each(function(index) {
            if (index != 0) {
                $row = $(this);
                port_dns += $row.find("td:first").text() + ";";
            }
        });
    $('#port_dns').val(port_dns);
    $('#create_vpc_name').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('create_vpc')
            $('#network_form').submit();
            $('#create_vpc_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#create_vpc_name').rules("remove", "required");
}

function get_sel_delete_networks() {
    $('#sel_delete_network_group').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_sel_delete_networks')
            $('#network_form').submit();
            $('#delete_network_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_network_group').rules("remove", "required");
}

function delete_network() {
    $('#sel_delete_network_group').rules("add", "required");
    $('#sel_delete_network_name').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('delete_network')
            $('#network_form').submit();
            $('#delete_network_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_network_name').rules("remove", "required");
    $('#sel_delete_network_group').rules("remove", "required");
}

function delete_group() {
    $('#sel_delete_group_name').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('delete_group')
            $('#network_form').submit();
            $('#delete_group_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_group_name').rules("remove", "required");
}

function get_delete_vpc_assigned_ports(){
    $('#sel_delete_vpc_name').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_delete_vpc_assigned_ports')
            $('#network_form').submit();
            $('#delete_vpc_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_vpc_name').rules("remove", "required");
}

function get_vpcs(){
    if($('#network_form').valid()){
            $('#operation').val('get_vpcs')
            $('#network_form').submit();
            $('#delete_vpc_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
}

function delete_vpc(){
    $('#sel_delete_vpc_name').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('delete_vpc')
            $('#network_form').submit();
            $('#delete_vpc_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_vpc_name').rules("remove", "required");
}

function get_create_vpc_access_networks() {
    $('#sel_group_create_vpc_access').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_create_vpc_access_networks')
            $('#network_form').submit();
            $('#div_create_vpc_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_group_create_vpc_access').rules("remove", "required");
}

function create_vpc_access(){
    $('#sel_group_create_vpc_access').rules("add", "required");
    $('#sel_network_create_vpc_access').rules("add", "required");
    $('#sel_vpc_create_vpc_access').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('create_vpc_access')
            $('#network_form').submit();
            $('#div_create_vpc_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_group_create_vpc_access').rules("remove", "required");
    $('#sel_network_create_vpc_access').rules("remove", "required");
    $('#sel_vpc_create_vpc_access').rules("remove", "required");
}

function get_delete_vpc_access_networks(){
    $('#sel_group_delete_vpc_access').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_delete_vpc_access_networks')
            $('#network_form').submit();
            $('#div_delete_vpc_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_group_delete_vpc_access').rules("remove", "required");
}

function get_delete_vpc_access_assignments(){
    $('#sel_group_delete_vpc_access').rules("add", "required");
    $('#sel_network_delete_vpc_access').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_delete_vpc_access_assignments')
            $('#network_form').submit();
            $('#div_delete_vpc_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_group_delete_vpc_access').rules("remove", "required");
    $('#sel_network_delete_vpc_access').rules("remove", "required");
}

function delete_network_vpc_assignments(){
    $('#sel_group_delete_vpc_access').rules("add", "required");
    $('#sel_network_delete_vpc_access').rules("add", "required");
    $('#sel_vpc_delete_vpc_access').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('delete_vpc_access')
            $('#network_form').submit();
            $('#div_delete_vpc_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_group_delete_vpc_access').rules("remove", "required");
    $('#sel_network_delete_vpc_access').rules("remove", "required");
    $('#sel_vpc_delete_vpc_access').rules("remove", "required");
}

function get_create_single_access_networks() {
    $('#sel_create_single_access_group').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_create_single_access_networks')
            $('#network_form').submit();
            $('#create_single_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_create_single_access_group').rules("remove", "required");
}
function get_create_single_access_ports () {
    $('#sel_create_single_access_leaf').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_create_single_access_ports')
            $('#network_form').submit();
            $('#create_single_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_create_single_access_leaf').rules("remove", "required");
}
function create_single_access(){
    $('#sel_create_single_access_leaf').rules("add", "required");
    $('#sel_create_single_access_group').rules("add", "required");
    $('#sel_create_single_access_network').rules("add", "required");
    $('#sel_create_single_access_port').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('create_single_access')
            $('#network_form').submit();
            $('#create_single_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_create_single_access_port').rules("remove", "required");
    $('#sel_create_single_access_network').rules("remove", "required");
    $('#sel_create_single_access_group').rules("remove", "required");
    $('#sel_create_single_access_leaf').rules("remove", "required");
}

function get_delete_single_access_networks() {
    $('#sel_delete_single_access_group').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_delete_single_access_networks')
            $('#network_form').submit();
            $('#delete_single_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_single_access_group').rules("remove", "required");
}
function get_delete_single_access_ports () {
    $('#sel_delete_single_access_leaf').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('get_delete_single_access_ports')
            $('#network_form').submit();
            $('#delete_single_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_single_access_leaf').rules("remove", "required");
}
function delete_single_access(){
    $('#sel_delete_single_access_leaf').rules("add", "required");
    $('#sel_delete_single_access_group').rules("add", "required");
    $('#sel_delete_single_access_network').rules("add", "required");
    $('#sel_delete_single_access_port').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('delete_single_access')
            $('#network_form').submit();
            $('#delete_single_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_single_access_port').rules("remove", "required");
    $('#sel_delete_single_access_network').rules("remove", "required");
    $('#sel_delete_single_access_group').rules("remove", "required");
    $('#sel_delete_single_access_leaf').rules("remove", "required");
}

function get_create_network_profile_networks(){
    $('#sel_create_network_profile_group').rules('add','required')
    if($('#network_form').valid()){
            $('#operation').val('get_create_network_profile_networks')
            $('#network_form').submit();
            $('#create_network_profile_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_create_network_profile_group').rules('remove','required')
}

function add_create_network_profile(){
    $('#create_network_profile_response').html('')
    $('#sel_create_network_profile_group').rules("add", "required");
    $('#sel_create_network_profile_network').rules("add", "required");
    if($('#network_form').valid()){
        tr_id = $('#sel_create_network_profile_network option:selected').val().replace(/-/g,'').replace(/\//g,'')
        is_added = false;
        $("#table_create_network_profile tr").each(function(index) {
            if (index != 0) {

                $row = $(this);

                var id = $row.find("td:first").text();

                if (id.indexOf(tr_id) == 0) {
                       $('#create_network_profile_response').html(
                       '<label class="label label-danger" > <i class="fa fa-times-circle"></i> VLAN already added</label>'
                       );
                       is_added = true;
                }
            }
        });
        if (!is_added){
            $('#table_create_network_profile > tbody > tr').eq(0).after(
                '<tr id=' +
                tr_id +
                '><td style="display:none">' +
                $('#sel_create_network_profile_network option:selected').val() +
                '</td><td>' + $('#sel_create_network_profile_group option:selected').text() +
                '</td><td>' + $('#sel_create_network_profile_network option:selected').text() +
                '</td><td><i class="fa fa-times-circle" onclick="$(\'#' +
                tr_id +
                '\').remove();"></i>' +
                '</td></tr>'
            );
        }
    }
    $('#sel_create_network_profile_group').rules("remove", "required");
    $('#sel_create_network_profile_network').rules("remove", "required");
}

function create_network_profile(){
    if($("#table_create_network_profile tr").length - 2 <= 0){
        $('#create_network_profile_response').html(
        '<label class="label label-danger" > <i class="fa fa-times-circle">' +
        '</i>You must assign at least two VLANS</label>');
        return;
    }
    network_dns = ''
    $("#table_create_network_profile tr").each(function(index) {
            if (index != 0) {
                $row = $(this);
                network_dns += $row.find("td:first").text() + ";";
            }
        });
    $('#create_network_profile_dns').val(network_dns);
    $('#create_network_profile_name').rules("add", "required");
    if($('#network_form').valid()){
            $('#operation').val('create_network_profile')
            $('#network_form').submit();
            $('#create_network_profile_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#create_network_profile_name').rules("remove", "required");

}

function get_network_profiles(){
    if($('#network_form').valid()){
            $('#operation').val('get_network_profiles')
            $('#network_form').submit();
            $('#div_create_vpc_access_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
}

function get_delete_network_profile_networks(){
    $('#sel_delete_network_profile').rules('add','required')
    if($('#network_form').valid()){
            $('#operation').val('get_delete_network_profile_networks')
            $('#network_form').submit();
            $('#delete_network_profile_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_network_profile').rules('remove','required')
}

function delete_network_profile(){
    $('#sel_delete_network_profile').rules('add','required')
    if($('#network_form').valid()){
            $('#operation').val('delete_network_profile')
            $('#network_form').submit();
            $('#delete_network_profile_response').html('<img src="/static/images/loading.gif" style="height:20px" />');
    }
    $('#sel_delete_network_profile').rules('remove','required')
}








</script>
{% endblock scripts %}
